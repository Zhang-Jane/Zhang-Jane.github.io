<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>go语言基础 | desperado</title><meta name="author" content="Jane"><meta name="copyright" content="Jane"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Go是一门强类型静态编程语言 数据类型GO语言提供了类型推导的语法糖，:&amp;#x3D;，注意，使用此声明变量的时候，左边的值中至少要有一个变量必须是为定义，否则会出现no new variables on left side of :&amp;#x3D; ，而且它不能出现在全局的变量声明和初始化。 123var a &amp;#x3D; 10或则"><link rel="shortcut icon" href="/img/hamburger.ico"><link rel="canonical" href="http://www.idesperado.com/post/80db8027.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'go语言基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-02-05 16:48:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">#toggle-sidebar {bottom: 80px}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img2.baidu.com/it/u=4274118481,3879373441&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=400&amp;h=400" onerror="onerror=null;src='/img/unfind.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">94</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/program/nav.html"><i class="fa-fw fas fa-list"></i><span> pdf笔记</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 听音乐</span></a></li><li><a class="site-page child" href="/concert/"><i class="fa-fw fas fa-video"></i><span> 演唱会</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/extra_imgs/town.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">desperado</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/program/nav.html"><i class="fa-fw fas fa-list"></i><span> pdf笔记</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 听音乐</span></a></li><li><a class="site-page child" href="/concert/"><i class="fa-fw fas fa-video"></i><span> 演唱会</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">go语言基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-05T07:50:08.000Z" title="发表于 2023-02-05 15:50:08">2023-02-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-05T08:48:50.231Z" title="更新于 2023-02-05 16:48:50">2023-02-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/go%E8%AF%AD%E8%A8%80/">go语言</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="go语言基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><strong>Go是一门强类型静态编程语言</strong></p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>GO语言提供了类型推导的语法糖，<code>:=</code>，注意，使用此声明变量的时候，左边的值中至少要有一个变量必须是为定义，否则会出现<code>no new variables on left side of := </code>，而且它不能出现在全局的变量声明和初始化。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line">或则</span><br><span class="line">a := <span class="number">10</span></span><br></pre></td></tr></table></figure>
<h3 id="bool类型"><a href="#bool类型" class="headerlink" title="bool类型"></a>bool类型</h3><p>布尔型的值只可以是常量 true 或者 false。一个简单的例子：var b bool &#x3D; true</p>
<h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><h4 id="整数型"><a href="#整数型" class="headerlink" title="整数型"></a>整数型</h4><p>范围的计算机规则$$无符号的：0-2^n \ 有符号：-2^{n}&#x2F;2,2^{n}&#x2F;2 -1$$</p>
<ul>
<li>int8 有符号 8 位整型 (-128 到 127) 长度：8bit</li>
<li>int16 有符号 16 位整型 (-32768 到 32767)</li>
<li>int32 有符号 32 位整型 (-2147483648 到 2147483647)</li>
<li>int64 有符号 64 位整型 (-9223372036854775808 到 9223372036854775807)</li>
<li>uint8 无符号 8 位整型 (0 到 255) 8位都用于表示数值：</li>
<li>uint16 无符号 16 位整型 (0 到 65535)</li>
<li>uint32 无符号 32 位整型 (0 到 4294967295)</li>
<li>uint64 无符号 64 位整型 (0 到 18446744073709551615)</li>
</ul>
<h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><ul>
<li>float32  32位浮点型数</li>
<li>float64  64位浮点型数</li>
</ul>
<h3 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h3><p>Golang中没有专门的字符类型，如果要存储单个字符(字母)，一般使用byte来保存。</p>
<p>字符串就是一串固定长度的字符连接起来的字符序列。Go的字符串是由单个字节连接起来的。也就是说<span style="background:#ff4d4f">对于传统的字符串是由字符组成的，而Go的字符串不同，它是由字节组成的</span>。<br>字符常量只能使用单引号(<code>&#39;&#39;</code>)括起来</p>
<p><strong>go语言的字符有俩种类型</strong></p>
<ul>
<li>byte（代表ASCII编码的一个字符）</li>
<li>rune（代表UTF-8编码的一个字符）</li>
</ul>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>字符串就是一串固定长度的字符连接起来的字符序列。Go 的字符串是由单个字节连接起来的。Go 语言的字符串的字节使用 UTF-8 编码标识 Unicode 文本。<br>用双引号(<code>&quot;&quot;</code>)括起来</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li>byte 等于 uint8</li>
<li>rune 等于 int32</li>
<li>多行字符串用``</li>
<li>统计字符长度<ul>
<li>ASCII 字符串长度使用 len() 函数。</li>
<li>Unicode 字符串长度使用 utf8.RuneCountInString() 函数。</li>
</ul>
</li>
<li>最好使用<code>for range</code>来遍历数组，切片，字符串，map，以及channel</li>
</ul>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关于字符串遍历的时候出现的某些问题，中文的采用的是utf-8的编码（一个中文占三个字节）</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> str = <span class="string">&quot;abc北京&quot;</span></span><br><span class="line">    str2 := []<span class="type">rune</span>(str)</span><br><span class="line">	<span class="keyword">for</span> i :=<span class="number">0</span>; i &lt; <span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line">    ch := str[i]</span><br><span class="line">      fmt.Printf(<span class="string">&quot;str[%d]=%c\n&quot;</span>, i, ch)</span><br><span class="line">  &#125;</span><br><span class="line">	<span class="comment">// range自动帮你转换了</span></span><br><span class="line">    <span class="keyword">for</span> i, ch := <span class="keyword">range</span> str &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;str[%d]=%c\n&quot;</span>, i, ch)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/* 定义局部变量 */</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span> = <span class="number">1</span></span><br><span class="line">	<span class="comment">/* </span></span><br><span class="line"><span class="comment">    循环:</span></span><br><span class="line"><span class="comment">    break: 中止当前的循环，如果有嵌套，无法影响后面的运行</span></span><br><span class="line"><span class="comment">    goto:无条件的跳转到相同函数中带标签的语句</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">	LOOP: <span class="keyword">for</span> a &lt; <span class="number">10</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> a == <span class="number">5</span> &#123;</span><br><span class="line">			<span class="comment">/* 跳过迭代 */</span></span><br><span class="line">			a = a + <span class="number">1</span></span><br><span class="line">			<span class="keyword">goto</span> LOOP</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">3</span> &#123;</span><br><span class="line">		    fmt.Printf(<span class="string">&quot;a的break值为 : %d\n&quot;</span>, a)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125; </span><br><span class="line">		fmt.Printf(<span class="string">&quot;a的值为 : %d\n&quot;</span>, a)</span><br><span class="line">		a++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//字符串基本操作</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 求解字符串的长度</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回的是字节的长度</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//涉及到中文问题就产生了变化</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//unicode 字符集， 存储的时候需要编码 utf8编码规则， utf8编码是一个动态的编码规则</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//utf8编码， 还能够用一个字节表示英文</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//var name string = &quot;bobby:\&quot;慕课网\&quot;&quot; //转义符</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//fmt.Println(len(name))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">////类型转换</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//name_arr := []int32(name)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//fmt.Println(len(name_arr))</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//date := &quot;2020\\06\\18&quot; //转义符</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//fmt.Println(date)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 是否包含某个子串</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name <span class="type">string</span> = <span class="string">&quot;bobby:\&quot;慕课网\&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Contains(name, <span class="string">&quot;慕课网&quot;</span>))</span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Index(name, <span class="string">&quot;慕课网&quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 统计出现的次数</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Count(name, <span class="string">&quot;b&quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 前缀和后缀</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.HasPrefix(name, <span class="string">&quot;o&quot;</span>))</span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.HasSuffix(name, <span class="string">&quot;\&quot;&quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 大小写转换</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.ToUpper(<span class="string">&quot;bobby&quot;</span>))</span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.ToLower(<span class="string">&quot;BOBBY&quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. 字符串的比较</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Compare(<span class="string">&quot;ab&quot;</span>, <span class="string">&quot;aa&quot;</span>)) <span class="comment">//字符的比较就是ascii的比较 返回-1， 1， 0</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Compare(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>))   <span class="comment">//字符的比较就是ascii的比较 返回-1， 1， 0</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Compare(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;b&quot;</span>))   <span class="comment">//字符的比较就是ascii的比较 返回-1， 1， 0</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//6. 去掉空格和指定字符串</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.TrimSpace(<span class="string">&quot; bobby &quot;</span>))</span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.TrimLeft(<span class="string">&quot;bobby&quot;</span>, <span class="string">&quot;b&quot;</span>))</span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Trim(<span class="string">&quot;bobby&quot;</span>, <span class="string">&quot;b&quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. split方法</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Split(<span class="string">&quot;bobby imooc&quot;</span>, <span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//8. 合并 join方法将字符串数组连接起来</span></span><br><span class="line"></span><br><span class="line">    arrs := strings.Split(<span class="string">&quot;bobby imooc&quot;</span>, <span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Join(arrs, <span class="string">&quot;-&quot;</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//9. 字符串替换</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(strings.Replace(<span class="string">&quot;bobby: 18 电话：18888888&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="高级类型"><a href="#高级类型" class="headerlink" title="高级类型"></a>高级类型</h2><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>Go 语言提供了数组类型的数据结构。 数组是具有相同唯一类型的一组已编号且长度固定的数据项序列，这种类型可以是任意的原始类型例如整形、字符串或者自定义类型。<br>数组元素可以通过索引（位置）来读取（或者修改），索引从0开始，第一个元素索引为 0，第二个索引为 1，以此类推。数组的下标取值范围是从0开始，到长度减1。<br>数组一旦定义后，大小不能更改。</p>
<p><font color="#00b050">如果我就想在数组中定义不同类型，怎么办？</font></p>
<p>使用interface</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">type</span> container <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// li := [] int &#123;1, 2, 4, 6&#125;</span></span><br><span class="line">  li2 := [...] container &#123;<span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;一&#x27;</span>, <span class="literal">true</span>&#125;</span><br><span class="line">  fmt.Println(li2)</span><br><span class="line">  <span class="comment">// 默认给指定的位置初始化值</span></span><br><span class="line">  f := [...]<span class="type">int</span>&#123;<span class="number">0</span>:<span class="number">1</span>, <span class="number">4</span>:<span class="number">1</span>, <span class="number">9</span>:<span class="number">100</span>&#125;</span><br><span class="line">  fmt.Println(f)</span><br><span class="line">  f2 := [<span class="number">2</span>] <span class="type">string</span> &#123;<span class="string">&quot;helo&quot;</span>, <span class="string">&quot;world&quot;</span>, <span class="string">&quot;nihao&quot;</span>&#125;</span><br><span class="line">  fmt.Println(f2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><span style="background:#b1ffff">需要注意的是：数组是值类型</span><br>数组是值类型 Go中的数组是值类型，而不是引用类型。这意味着当它们被分配给一个新变量时，将把原始数组的副本分配给新变量。如果对新变量进行了更改，则不会在原始数组中反映。</p>
<p>注意：</p>
<ul>
<li>数组的大小是类型的一部分。因此[5]int和[25]int是不同的类型。因此，数组不能被调整大小</li>
</ul>
<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>Go 数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型切片(“动态数组”),与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。<br>注意：</p>
<ul>
<li> 切片的传递是引用传递<br>直接声明<br><code>var slice []int</code></li>
</ul>
<p>new<br><code>slice := *new([]int)</code></p>
<p>字面量<br><code>slice := []int&#123;1,2,3,4,5&#125;</code></p>
<p>make<br><code>slice := make([]int, 5, 10)</code></p>
<p>从切片或数组“截取”<br><code>slice := array[1:5]</code> 或 <code>slice := sourceSlice[1:5]</code></p>
<p>底层存储</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kikajack/article/details/79833674">https://blog.csdn.net/kikajack/article/details/79833674</a></p>
<p>go和python的切片区别</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_15437667/article/details/70191873">https://blog.csdn.net/qq_15437667&#x2F;article&#x2F;details&#x2F;70191873</a></p>
<p>slice扩容机制</p>
<ol>
<li><p>如果当前所需容量 （cap） 大于原先容量的两倍 （doublecap），则最终申请容量（newcap）为当前所需容量（cap）；</p>
</li>
<li><p>如果&lt;条件1&gt;不满足，表示当前所需容量（cap）不大于原容量的两倍（doublecap），则进行如下判断；</p>
</li>
<li><p>如果原切片长度（old.len）小于1024，则最终申请容量（newcap）等于原容量的两倍（doublecap）；</p>
</li>
<li><p>否则，最终申请容量（newcap，初始值等于 old.cap）每次增加 newcap&#x2F;4，直到大于所需容量（cap）为止，然后，判断最终申请容量（newcap）是否溢出，如果溢出，最终申请容量（newcap）等于所需容量（cap）；</p>
</li>
</ol>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>在 Go 语言中，map 中的 key 类型必须是可比较的类型。这意味着 key 类型必须是能够进行相等性比较的类型，比如整数类型、字符串类型、指针类型等。<br>key的常用类型：int, rune, string, 结构体(每个元素需要支持 &#x3D;&#x3D; or !&#x3D; 操作), 指针</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 字面值</span></span><br><span class="line">&#123;</span><br><span class="line">    m1 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;m1&quot;</span>: <span class="string">&quot;v1&quot;</span>, <span class="comment">// 定义时指定的初始key/value, 后面可以继续添加    &#125;   </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 使用make函数</span></span><br><span class="line">&#123;</span><br><span class="line">    m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>) <span class="comment">// 创建时，里面不含元素，元素都需要后续添加    </span></span><br><span class="line">    m2[<span class="string">&quot;m2&quot;</span>] = <span class="string">&quot;v2&quot;</span>               <span class="comment">// 添加元素    </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个空的map</span></span><br><span class="line">&#123;</span><br><span class="line">    m3 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;&#125;    </span><br><span class="line">    m4 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)    </span><br><span class="line">&#125;</span><br><span class="line">	<span class="comment">// m0 可以, key类型为string, 支持 == 比较操作</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">var</span> m0 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span> <span class="comment">// 定义map类型变量m0，key的类型为string，value的类型string</span></span><br><span class="line">		fmt.Println(m0)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// m1 不可以, []byte是slice，不支持 == != 操作，不可以作为map key的数据类型</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">var</span> m1 <span class="keyword">map</span>[[]<span class="type">byte</span>]<span class="type">string</span> <span class="comment">// 报错： invalid map key type []byte</span></span><br><span class="line">		fmt.Println(m1)</span><br><span class="line"></span><br><span class="line">		准确说slice类型只能与<span class="literal">nil</span>比较，其他的都不可以，可以通过如下测试：</span><br><span class="line">		<span class="keyword">var</span> b1,b2 []<span class="type">byte</span></span><br><span class="line">		fmt.Println(b1==b2) <span class="comment">// 报错： invalid operation: b1 == b2 (slice can only be compared to nil)</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// m2 可以, interface&#123;&#125;类型可以作为key，但是需要加入的key的类型是可以比较的</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">var</span> m2 <span class="keyword">map</span>[<span class="keyword">interface</span>&#123;&#125;]<span class="type">string</span></span><br><span class="line">		m2 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">interface</span>&#123;&#125;]<span class="type">string</span>)</span><br><span class="line">		m2[[]<span class="type">byte</span>(<span class="string">&quot;k2&quot;</span>)]=<span class="string">&quot;v2&quot;</span> <span class="comment">// panic: runtime error: hash of unhashable type []uint8</span></span><br><span class="line">		m2[<span class="number">123</span>] = <span class="string">&quot;123&quot;</span></span><br><span class="line">		m2[<span class="number">12.3</span>] = <span class="string">&quot;123&quot;</span></span><br><span class="line">		fmt.Println(m2)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// m3 可以， 数组支持比较</span></span><br><span class="line">	&#123;</span><br><span class="line">		a3 := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">		<span class="keyword">var</span> m3 <span class="keyword">map</span>[[<span class="number">3</span>]<span class="type">int</span>]<span class="type">string</span></span><br><span class="line">		m3 = <span class="built_in">make</span>(<span class="keyword">map</span>[[<span class="number">3</span>]<span class="type">int</span>]<span class="type">string</span>)</span><br><span class="line">		m3[a3] = <span class="string">&quot;m3&quot;</span></span><br><span class="line">		fmt.Println(m3)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// m4 可以，book1里面的元素都是支持== !=</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">type</span> book1 <span class="keyword">struct</span> &#123;</span><br><span class="line">			name <span class="type">string</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> m4 <span class="keyword">map</span>[book1]<span class="type">string</span></span><br><span class="line">		fmt.Println(m4)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// m5 不可以, text元素类型为[]byte, 不满足key的要求</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">type</span> book2 <span class="keyword">struct</span> &#123;</span><br><span class="line">			name <span class="type">string</span></span><br><span class="line">			text []<span class="type">byte</span> <span class="comment">//没有这个就可以</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> m5 <span class="keyword">map</span>[book2]<span class="type">string</span> <span class="comment">//invalid map key type book2</span></span><br><span class="line">		fmt.Println(m5)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>遍历的顺序是随机的</li>
<li>使用for range遍历的时候，k,v使用的同一块内存，这也是容易出现错误的地方<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历的顺序是随机的</span></span><br><span class="line">m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;</span><br><span class="line">		<span class="string">&quot;a&quot;</span>: <span class="number">1</span>,</span><br><span class="line">		<span class="string">&quot;b&quot;</span>: <span class="number">2</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;k:[%v].v:[%v]\n&quot;</span>, k, v) <span class="comment">// 输出k,v值</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">k:[b].v:[2]</span></span><br><span class="line"><span class="comment">k:[a].v:[1]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 虽然v的_地址没有变化_，但v的_内容在一直变化_，当遍历完成后，v的内容是map遍历时最后遍历的元素的。当程序将v的地址放入到slice中的时候，slice在不断地将v的地址插入，由于v一直是那块地址，因此slice中的每个元素记录的都是v的地址。因此当打印slice中的内容的时候，都是同一个值。就好比一直在给一个变量赋不同的值</span></span><br><span class="line">m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;</span><br><span class="line">		<span class="string">&quot;a&quot;</span>: <span class="number">1</span>,</span><br><span class="line">		<span class="string">&quot;b&quot;</span>: <span class="number">2</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> bs []*<span class="type">int</span></span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;k:[%p].v:[%p]\n&quot;</span>, &amp;k, &amp;v) <span class="comment">// 这里的输出可以看到，k一直使用同一块内存，v也是这个状况</span></span><br><span class="line">		bs = <span class="built_in">append</span>(bs, &amp;v) <span class="comment">// 对v取了地址</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 输出</span></span><br><span class="line">	<span class="keyword">for</span> _, b := <span class="keyword">range</span> bs &#123;</span><br><span class="line">		fmt.Println(*b) <span class="comment">// 输出都是1或者都是2</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="make和new"><a href="#make和new" class="headerlink" title="make和new"></a>make和new</h3><p>Go语言中 new 和 make 是两个内置函数，主要用来创建并分配类型的内存。<br>在声明变量的时候，都有默认值：</p>
<ul>
<li>默认值是它所属类型的零值。<ul>
<li><code>int</code> 型它的零值为 <code>0</code></li>
<li><code>string</code> 的零值为 <code>&quot;&quot;</code></li>
<li>引用类型的零值为 <code>nil</code>。</li>
</ul>
</li>
<li>如果是一个<font color="#7030a0">引用类型，我们不仅要声明它，还要为它分配内存空间，否则我们赋值就无处安放</font>。</li>
<li>值类型的声明不需要我们分配内存空间，因为已经默认给我们分配好啦。<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此内置函数用于分配内存，第一个参数接收一个类型而不是一个值，函数返回一个指向该类型内存地址的指针，同时把分配的内存置为该类型的零值。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span></span> *Type</span><br><span class="line"><span class="keyword">var</span> p *<span class="type">int</span> = <span class="built_in">new</span>(<span class="type">int</span>) <span class="comment">//go的编译器就知道先申请一个内存空间，这里的内存中的值全部设置为0</span></span><br><span class="line">*p = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与 new 不同的是，它一般只用于 `chan`，`map`，`slice` 的初始化，并且直接返回这三种类型本身</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(t Type, size ...IntegerType)</span></span> Type</span><br><span class="line">d := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
区别：</li>
<li>new函数返回的是这个值的地址指针； make函数返回的是指定类型的实例</li>
<li>new 用于给类型分配内存空间，并且置零；make 只用于 chan，map，slice 的初始化。</li>
</ul>
<h3 id="接口-接口命名习惯以-er-结尾"><a href="#接口-接口命名习惯以-er-结尾" class="headerlink" title="接口( 接口命名习惯以 er 结尾)"></a>接口( 接口命名习惯以 er 结尾)</h3><p>在Go语言中接口（interface）是一种类型，一种抽象的类型。</p>
<p>interface是一组method的集合，是duck-type programming的一种体现。接口做的事情就像是定义一个协议（规则），只要一台机器有洗衣服和甩干的功能，我就称它为洗衣机。不关心属性（数据），只关心行为（方法）。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 接口类型名 <span class="keyword">interface</span>&#123;</span><br><span class="line">	方法名<span class="number">1</span>( 参数列表<span class="number">1</span> ) 返回值列表<span class="number">1</span></span><br><span class="line">	方法名<span class="number">2</span>( 参数列表<span class="number">2</span> ) 返回值列表<span class="number">2</span></span><br><span class="line">	…</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//接口是一个协议- 程序员 - 只要你能够 1. 写代码 2. 解决bug 其实就是一组方法的集合</span></span><br><span class="line"><span class="keyword">type</span> Programmer <span class="keyword">interface</span> &#123;</span><br><span class="line">	Coding() <span class="type">string</span> <span class="comment">//方法只是申明</span></span><br><span class="line">	Debug() <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Designer <span class="keyword">interface</span> &#123;</span><br><span class="line">	Design() <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Manger <span class="keyword">interface</span> &#123;</span><br><span class="line">	Programmer</span><br><span class="line">	Designer</span><br><span class="line">	Manage() <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> G <span class="keyword">struct</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//java的话 java里面一种类型只要继承一个接口 才行 如果你继承了这个接口的话 那么这个接口里面的所有方法你必须要全部实现</span></span><br><span class="line"><span class="keyword">type</span> UIDesigner <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d UIDesigner)</span></span> Design() <span class="type">string</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;我会ui设计&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;我会ui设计&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Pythoner <span class="keyword">struct</span> &#123;</span><br><span class="line">	UIDesigner</span><br><span class="line">	lib []<span class="type">string</span></span><br><span class="line">	kj []<span class="type">string</span></span><br><span class="line">	years <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p G)</span></span> Coding() <span class="type">string</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;go开发者&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;go开发者&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p G)</span></span> Debug() <span class="type">string</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;我会go的debug&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;我会go的debug&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Pythoner)</span></span> Coding() <span class="type">string</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;python开发者&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;python开发者&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Pythoner)</span></span> Debug() <span class="type">string</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;我会python的debug&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;我会python的debug&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Pythoner)</span></span> Manage() <span class="type">string</span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;不好意思，管理我也懂&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;不好意思，管理我也懂&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">//新的语言出来了, 接口帮我们完成了go语言的多态</span></span><br><span class="line">	<span class="comment">//var pro Programmer = Pythoner&#123;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> pros []Programmer</span><br><span class="line">	pros = <span class="built_in">append</span>(pros, Pythoner&#123;&#125;)</span><br><span class="line">	pros = <span class="built_in">append</span>(pros, G&#123;&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//接口虽然是一种类型 但是和其他类型不太一样 接口是一种抽象类型 struct是具象</span></span><br><span class="line">	p := Pythoner&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, p)</span><br><span class="line">	<span class="keyword">var</span> pro Programmer = Pythoner&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, pro)</span><br><span class="line">	<span class="keyword">var</span> pro2 Programmer = G&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T&quot;</span>, pro2)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构体-首字母大写公共，小写私有"><a href="#结构体-首字母大写公共，小写私有" class="headerlink" title="结构体(首字母大写公共，小写私有)"></a>结构体(首字母大写公共，小写私有)</h3><p>Go 语言中的结构体（struct）是一种自定义的类型，它可以用来组合多个不同类型的数据字段（field）成为一个单独的实体。例如，你可以定义一个结构体表示人的信息，包括他的名字、年龄、身高等，而每个字段的类型可以是 string、int 或 float64 等。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Course <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Price <span class="type">int</span></span><br><span class="line">	Url <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数的接收者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Course)</span></span> printCourseInfo()  &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;课程名:%s, 课程价格: %d, 课程的地址:%s&quot;</span>, c.Name, c.Price, c.Url)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Course)</span></span> setPrice(price <span class="type">int</span>)&#123;</span><br><span class="line">	c.Price = price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 结构体的方法只能和结构体在同一个包中</span></span><br><span class="line"><span class="comment">//2. 内置的int类型不能加方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">//go语言不支持面向对象</span></span><br><span class="line">	<span class="comment">//面向对象的三个基本特征： 1. 封装 2. 继承 3. 多态 4. 方法重载 4. 抽象基类</span></span><br><span class="line">	<span class="comment">//定义struct go语言没有class这个概念 所以说对于很多人来说会少理解很多面向对象抽象的概念</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1. 实例化- kv形式</span></span><br><span class="line">	<span class="keyword">var</span> c Course = Course&#123;</span><br><span class="line">		Name: <span class="string">&quot;django&quot;</span>,</span><br><span class="line">		Price: <span class="number">100</span>,</span><br><span class="line">		Url: <span class="string">&quot;https://www.imooc.com&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//访问</span></span><br><span class="line">	fmt.Println(c.Name, c.Price, c.Url)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//大小写在go语言中的重要性 可见性</span></span><br><span class="line">	<span class="comment">//一个包中的变量或者结构体如果首字母是小写 那么对于另一个包不可见</span></span><br><span class="line">	<span class="comment">//机构体定义的 名称 以及属性首字母大写很重要</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2. 第二种实例化方式 - 顺序形式</span></span><br><span class="line">	c2 := Course&#123;<span class="string">&quot;scrapy&quot;</span>, <span class="number">110</span>, <span class="string">&quot;https://www.imooc.com&quot;</span>&#125;</span><br><span class="line">	fmt.Println(c2.Name, c2.Price, c2.Url)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3. 如果一个指向结构体的指针, 通过结构体指针获取对象的值， 让很多人莫名其妙</span></span><br><span class="line">	c3 := &amp;Course&#123;<span class="string">&quot;tornado&quot;</span>, <span class="number">100</span>, <span class="string">&quot;https://www.imooc.com&quot;</span>&#125;</span><br><span class="line">	<span class="comment">//fmt.Printf(&quot;%T&quot;, c3)</span></span><br><span class="line">	<span class="comment">//应该能看出来 go语言实际上在借鉴动态语言的特性 - 很多地方不管如何写都是正确的</span></span><br><span class="line">	<span class="comment">//另一个根本的原因 - go语言的指针是受限的</span></span><br><span class="line">	fmt.Println(c3.Name, c3.Price, c3.Url) <span class="comment">//这里其实是go语言的一个语法糖 go语言内部会将c3.Name转换成 (*c3).Name</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//4. 零值 如果不给结构体赋值， go语言会默认给每个字段采用默认值</span></span><br><span class="line">	c4 := Course&#123;&#125;</span><br><span class="line">	fmt.Println(c4.Price,)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//5. 多种方式零值初始结构体</span></span><br><span class="line">	<span class="keyword">var</span> c5 Course = Course&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> c6 Course</span><br><span class="line">	<span class="keyword">var</span> c7 *Course = &amp;Course&#123;&#125;</span><br><span class="line">	<span class="comment">//为什么c6和c8表现出来的结果不一样 指针如果只申明不赋值 默认值是nil c6不是指针 是结构体的类型</span></span><br><span class="line">	<span class="comment">//slice map</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;零值初始化&quot;</span>)</span><br><span class="line">	fmt.Println(c5.Price)</span><br><span class="line">	fmt.Println(c6.Price)</span><br><span class="line">	fmt.Println(c7.Price)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//6. 结构体是值类型</span></span><br><span class="line">	c8 := Course&#123;<span class="string">&quot;scrapy&quot;</span>, <span class="number">110</span>, <span class="string">&quot;https://www.imooc.com&quot;</span>&#125;</span><br><span class="line">	c9 := c8</span><br><span class="line">	fmt.Println(c8)</span><br><span class="line">	fmt.Println(c9)</span><br><span class="line">	c8.Price = <span class="number">200</span></span><br><span class="line">	fmt.Println(c8)</span><br><span class="line">	fmt.Println(c9)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//go语言中struct无处不在</span></span><br><span class="line">	<span class="comment">//7. 结构体的大小 占用内存的大小 可以使用sizeof来查看对象占用的类型</span></span><br><span class="line">	fmt.Println(unsafe.Sizeof(<span class="number">1</span>))</span><br><span class="line">	<span class="comment">//go语言string的本质 其实string是一个结构体</span></span><br><span class="line">	fmt.Println(unsafe.Sizeof(<span class="string">&quot;&quot;</span>))</span><br><span class="line">	fmt.Println(unsafe.Sizeof(c8))</span><br><span class="line"></span><br><span class="line">	<span class="comment">//8. slice的大小</span></span><br><span class="line">	<span class="keyword">type</span> slice <span class="keyword">struct</span> &#123;</span><br><span class="line">		array unsafe.Pointer  <span class="comment">// 底层数组的地址</span></span><br><span class="line">		<span class="built_in">len</span> <span class="type">int</span> <span class="comment">// 长度</span></span><br><span class="line">		<span class="built_in">cap</span> <span class="type">int</span> <span class="comment">// 容量</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	s1 := []<span class="type">string</span>&#123;<span class="string">&quot;django&quot;</span>, <span class="string">&quot;tornado&quot;</span>, <span class="string">&quot;scrapy&quot;</span>, <span class="string">&quot;celery&quot;</span>, <span class="string">&quot;snaic&quot;</span>, <span class="string">&quot;flask&quot;</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;切片占用的内存:&quot;</span>, unsafe.Sizeof(s1))</span><br><span class="line"></span><br><span class="line">	m1 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span> &#123;</span><br><span class="line">		<span class="string">&quot;bobby1&quot;</span>: <span class="string">&quot;django&quot;</span>,</span><br><span class="line">		<span class="string">&quot;bobby2&quot;</span>: <span class="string">&quot;tornado&quot;</span>,</span><br><span class="line">		<span class="string">&quot;bobby3&quot;</span>: <span class="string">&quot;scrapy&quot;</span>,</span><br><span class="line">		<span class="string">&quot;bobby4&quot;</span>: <span class="string">&quot;celery&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(unsafe.Sizeof(m1))</span><br><span class="line"></span><br><span class="line">	<span class="comment">//结构体方法， 达到了封装数据和封装方法的效果</span></span><br><span class="line">	c10 := Course&#123;<span class="string">&quot;scrapy&quot;</span>, <span class="number">110</span>, <span class="string">&quot;https://www.imooc.com&quot;</span>&#125;</span><br><span class="line">	<span class="comment">//Course.setPrice(c10, 200)</span></span><br><span class="line">	(&amp;c10).setPrice(<span class="number">200</span>) <span class="comment">//修改c10的price? 为什么呢？ 语法糖 函数参数的传递是怎么传递的？ 结构体是值传递</span></span><br><span class="line">	fmt.Println(c10.Price)</span><br><span class="line">	<span class="comment">//c10.printCourseInfo()</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//结构体的接收者有两种形式 1. 值传递 2. 指针传递 如果你想改结构体的值 如果结构体的数据很大</span></span><br><span class="line">	<span class="comment">//go语言不支持继承 但是有办法能达到同样的效果 组合</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="结构体标签"><a href="#结构体标签" class="headerlink" title="结构体标签"></a>结构体标签</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体能基本上达到类的一个效果 多态</span></span><br><span class="line"><span class="keyword">type</span> Info <span class="keyword">struct</span> &#123; <span class="comment">//能表述的信息是有限的</span></span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span><span class="comment">//name是映射成mysql中char类型还是varchar类型还是text类型， 即使能够说明 但是额外的信息 max_length</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`json:&quot;age,omitempty&quot;`</span></span><br><span class="line">	Gender <span class="type">string</span> <span class="string">`json:&quot;-&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//type Info struct &#123; //能表述的信息是有限的</span></span><br><span class="line"><span class="comment">//	Name string `orm:&quot;name, max_length=17, min_length=5&quot;`</span></span><br><span class="line"><span class="comment">//	Age int `orm:&quot;age, min=18, max=70&quot;`</span></span><br><span class="line"><span class="comment">//	Gender string `orm:&quot;gender, required&quot;`</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//反射包</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">//结构体标签</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	结构体的字段除了名字和类型外，还可以有一个可选的标签（tag）：</span></span><br><span class="line"><span class="comment">	它是一个附属于字段的字符串，可以是文档或其他的重要标记。</span></span><br><span class="line"><span class="comment">	比如在我们解析json或生成json文件时，常用到encoding/json包，</span></span><br><span class="line"><span class="comment">	它提供一些默认标签，例如：omitempty标签可以在序列化的时候忽略0值或者空值。</span></span><br><span class="line"><span class="comment">	而-标签的作用是不进行序列化，其效果和和直接将结构体中的字段写成小写的效果一样。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	info := Info&#123;</span><br><span class="line">		Name: <span class="string">&quot;bobby&quot;</span>,</span><br><span class="line">		Gender:<span class="string">&quot;男&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	re, _ := json.Marshal(info)</span><br><span class="line">	fmt.Println(<span class="type">string</span>(re))</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过反射包去识别这些tag 简单的体验了一下反射的威力 spring 底层都是反射</span></span><br><span class="line">	t := reflect.TypeOf(info)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Type:&quot;</span>, t.Name())</span><br><span class="line">	fmt.Println(<span class="string">&quot;Kind:&quot;</span>, t.Kind())</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i&lt;t.NumField(); i++ &#123;</span><br><span class="line">		field := t.Field(i) <span class="comment">//获取结构体的每一个字段</span></span><br><span class="line">		tag := field.Tag.Get(<span class="string">&quot;orm&quot;</span>)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%d. %v (%v), tag: &#x27;%v&#x27;\n&quot;</span>, i+<span class="number">1</span>, field.Name, field.Type.Name(), tag)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//具体的应用绝大部分情况之下我们是不需要使用到反射的 实际开发的项目中会用到的</span></span><br><span class="line">	<span class="comment">//接口 java 实际上在go语言中接口这个概念的地位和java中接口的地位是不一样， go语言的接口实际上就是python中的协议 - 鸭子类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="结构体-方法"><a href="#结构体-方法" class="headerlink" title="结构体-方法"></a>结构体-方法</h4><p>Go 语言不是面向对象的语言，它里面不存在类的概念，结构体正是类的替代品。类可以附加很多成员方法，结构体也可以。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math&quot;</span></span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;</span><br><span class="line"> x <span class="type">int</span> y <span class="type">int</span> Radius <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 面积</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Circle)</span></span> Area() <span class="type">float64</span> &#123;</span><br><span class="line"> <span class="keyword">return</span> math.Pi * <span class="type">float64</span>(c.Radius) * <span class="type">float64</span>(c.Radius)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 周长</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Circle)</span></span> Circumference() <span class="type">float64</span> &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">2</span> * math.Pi * <span class="type">float64</span>(c.Radius)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> <span class="keyword">var</span> c = Circle &#123;Radius: <span class="number">50</span>&#125; </span><br><span class="line"> fmt.Println(c.Area(), c.Circumference()) <span class="comment">// 指针变量调用方法形式上是一样的 var pc = &amp;c fmt.Println(pc.Area(), pc.Circumference())</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="go语言中的type"><a href="#go语言中的type" class="headerlink" title="go语言中的type"></a>go语言中的type</h3><p>Go语言中的<code>type</code>关键字用于定义新的数据类型。在Go语言中，一个新的类型可以是一个结构体类型，接口类型，函数类型或基本类型（如int、string等）的别名。</p>
<p>例如，你可以使用<code>type</code>关键字定义一个新的类型<code>MyInt</code>，它是<code>int</code>类型的别名：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyInt <span class="type">int</span></span><br></pre></td></tr></table></figure>

<p>之后，你可以使用<code>MyInt</code>类型定义新的变量，就像使用其它基本类型一样：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myIntVar MyInt = <span class="number">5</span></span><br></pre></td></tr></table></figure>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p><strong>golang中根据首字母的大小写来确定可以访问的权限。无论是方法名、常量、变量名还是结构体的名称，如果首字母大写，则可以被其他的包访问；如果首字母小写，则只能在本包中使用。</strong><br>函数内部声明&#x2F;定义的变量叫局部变量，作用域仅限于函数内部</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// age 和 Name的作用域就只在test函数内部，即便是首字母为大写</span></span><br><span class="line">	age := <span class="number">10</span></span><br><span class="line">	Name := <span class="string">&quot;tom~&quot;</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;age=&quot;</span>, age) </span><br><span class="line">	fmt.Println(<span class="string">&quot;Name=&quot;</span>, Name)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数外部声明&#x2F;定义的变量叫全局变量，作用域在整个包都有效，如果其首字母为大写，则作用域在整个程序有效</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 函数外部声明/定义的变量叫全局变量，</span></span><br><span class="line"><span class="comment">// 作用域在整个包都有效，如果其首字母为大写，则作用域在整个程序有效</span></span><br><span class="line"><span class="keyword">var</span> age <span class="type">int</span> = <span class="number">50</span></span><br><span class="line"><span class="keyword">var</span> Name <span class="type">string</span> = <span class="string">&quot;jack~&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;age=&quot;</span>, age) <span class="comment">//  50</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;Name=&quot;</span>, Name) <span class="comment">// jack~</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果变量是在一个代码块，比如 for &#x2F; if 中，那么这个变量的的作用域就在该代码块</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 如果变量是在一个代码块，比如 for </span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;i=&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">var</span> i <span class="type">int</span> <span class="comment">//局部变量</span></span><br><span class="line">	<span class="keyword">for</span> i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;i=&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;i=&quot;</span>, i)</span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">xx</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// Go语法上不允许函数嵌套，但是支持匿名函数的嵌套</span></span><br><span class="line">  <span class="comment">// func xy() &#123;</span></span><br><span class="line">  <span class="comment">//   fmt.println(a)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  fu := <span class="function"><span class="keyword">func</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">  &#125;</span><br><span class="line">  fu()</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">20</span> </span><br><span class="line">  fmt.Println(a) </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  xx()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数声明包含一个函数名，参数列表， 返回值列表和函数体。如果函数没有返回值，则返回列表可以省略。函数从第一条语句开始执行，直到执行return语句或者执行函数的最后一条语句。</p>
<p>函数可以没有参数或接受多个参数。</p>
<p>注意类型在变量名之后 。</p>
<p>当两个或多个连续的函数命名参数是同一类型，则除了最后一个类型之外，其他都可以省略。</p>
<p>函数可以返回任意数量的返回值。</p>
<p>使用关键字 func 定义函数，左大括号依旧不能另起一行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(fn <span class="keyword">func</span>()</span></span> <span class="type">int</span>) <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义函数类型。</span></span><br><span class="line"><span class="keyword">type</span> FormatFunc <span class="function"><span class="keyword">func</span><span class="params">(s <span class="type">string</span>, x, y <span class="type">int</span>)</span></span> <span class="type">string</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">(fn FormatFunc, s <span class="type">string</span>, x, y <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(s, x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    s1 := test(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123; <span class="keyword">return</span> <span class="number">100</span> &#125;) <span class="comment">// 直接将匿名函数当参数。</span></span><br><span class="line"></span><br><span class="line">    s2 := format(<span class="function"><span class="keyword">func</span><span class="params">(s <span class="type">string</span>, x, y <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fmt.Sprintf(s, x, y)</span><br><span class="line">    &#125;, <span class="string">&quot;%d, %d&quot;</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println</span>(s1, s2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 100 10, 20</span></span><br></pre></td></tr></table></figure>
<h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a *<span class="type">int</span>, b *<span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="comment">//用于交换a和b</span></span><br><span class="line">	c := *a</span><br><span class="line">	*a = *b</span><br><span class="line">	*b = c</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//什么指针，我们提一个问题</span></span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	<span class="comment">//swap(a, b)</span></span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">	<span class="comment">//为什么交换不成功， 这个函数运行完成以后 我想要把a和b的值变掉</span></span><br><span class="line">	<span class="comment">//指针 - 对于内存来说，每一个字节其实都是有地址-通过16进制打印出来</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;a) <span class="comment">//变量有地址</span></span><br><span class="line">	<span class="comment">//现在有一种特殊的变量类型，这个变量只能保存地址值</span></span><br><span class="line">	<span class="keyword">var</span> ip *<span class="type">int</span> <span class="comment">//这个变量里面就只能保存地址类型这种值</span></span><br><span class="line">	ip = &amp;a</span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果要修改指针指向的变量的值，用法也比较特殊</span></span><br><span class="line">	*ip = <span class="number">30</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	<span class="comment">//如何定义指针变量 如果修改指针变量指向的内存中的值。 通过指针去取值的时候不知道应该取多大的连续内存空间</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;ip所指向的内存空间地址是：%p, 内存中的值是: %d\n&quot;</span>,ip, *ip)</span><br><span class="line">	swap(&amp;a, &amp;b)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">	<span class="comment">//还不足以说服大家</span></span><br><span class="line">	<span class="comment">//但是go中数组是值传递 数组中有100万个值， 对于这种一般我们都采用切片来传递</span></span><br><span class="line">	<span class="comment">//在python中list和dict这种传递都是引用传递</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//指针还可以指向数组 指向数组的指针 数组是值类型</span></span><br><span class="line">	arr := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> ip *[<span class="number">3</span>]<span class="type">int</span> = &amp;arr</span><br><span class="line">	<span class="comment">//指针数组</span></span><br><span class="line">	<span class="keyword">var</span> ptrs [<span class="number">3</span>]*<span class="type">int</span> <span class="comment">//创建能够存放三个指针变量的数组</span></span><br><span class="line">	<span class="comment">//很多时候都是函数参数的时候指明的类型</span></span><br><span class="line">	<span class="comment">//指针的默认值是nil</span></span><br><span class="line">	<span class="keyword">if</span> ip != <span class="literal">nil</span> &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//像python和java这种语言都是极力的屏蔽指针， c/c++ 都提供了指针 指针本身是很强大</span></span><br><span class="line">	<span class="comment">//c和c++中指针的功能很强大 指针的转换 指针的偏移 指针的运算</span></span><br><span class="line">	<span class="comment">//go语言没有屏蔽指针，但是go语言在指针上做了大量的限制，安全性高很多，相比较 c和c++灵活性就降低了</span></span><br><span class="line">	<span class="comment">//指针变量中涉及到两个符号 &amp; 和 *</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//make， new， nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="defer-panic-error-recover"><a href="#defer-panic-error-recover" class="headerlink" title="defer,panic,error,recover"></a>defer,panic,error,recover</h2><h3 id="defer特性"><a href="#defer特性" class="headerlink" title="defer特性"></a>defer特性</h3><pre><code>1. 关键字 defer 用于注册延迟调用。
2. 这些调用直到 return 前才被执。因此，可以用来做资源清理。
3. 多个defer语句，按先进后出的方式执行。
4. defer语句中的变量，在defer声明时就决定了。
5. defer之后只能是函数调用 不能是表达式
</code></pre>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="comment">//defer语句执行时的拷贝机制</span></span><br><span class="line">	x := <span class="number">10</span></span><br><span class="line">	<span class="comment">//此处的defer函数并没有参数，函数内部使用的值是全局的值</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span> <span class="params">(a *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">		fmt.Println(x)</span><br><span class="line">		fmt.Println(*a)</span><br><span class="line">	&#125;(&amp;x)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span> <span class="params">()</span></span> &#123;</span><br><span class="line">      x++</span><br><span class="line">      fmt.Println(x)</span><br><span class="line">    &#125;()</span><br><span class="line">	x++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较下面俩种方式输出结果</span></span><br><span class="line">x := <span class="number">10</span></span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span> <span class="params">()</span></span> &#123;</span><br><span class="line">  x++</span><br><span class="line">  fmt.Println(x)</span><br><span class="line">&#125;()</span><br><span class="line">x++</span><br><span class="line"><span class="comment">//output: 12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">a</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">x := <span class="number">10</span></span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span> <span class="params">(a <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">  fmt.Println(x)</span><br><span class="line">  x++</span><br><span class="line">&#125;(x)</span><br><span class="line">tmp := x</span><br><span class="line"><span class="keyword">return</span> tmp</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(a())</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output: </span></span><br><span class="line"><span class="comment">10</span></span><br><span class="line"><span class="comment">10</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="panic-和-error"><a href="#panic-和-error" class="headerlink" title="panic 和 error"></a>panic 和 error</h3><p>在go语言中，异常和错误是区分的。</p>
<ul>
<li>错误是程序中可能出现的问题，比如连接数据库失败，连接网络失败等，在程序设计中，错误处理是业务的一部分。</li>
<li>而异常指的是不应该出现问题的地方出现了问题，比如空指针引用，下标越界，向空 map 添加键值等，这种情况在人们的意料之外</li>
<li>对于真正意外的情况，那些表示不可恢复的程序错误，不可恢复才使用 panic。对于其他的错误情况，我们应该是期望使用 error 来进行判定<br>Go 提供了两种创建error的方法，分别是：<br><code>errors.New</code>  (<a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/pkg/errors">https://pkg.go.dev/github.com/pkg/errors</a>)<br>如果有一个现成的 <code>error</code> ，我们需要对他进行再次包装处理，这时候有三个函数可以选择<br>&#x2F;&#x2F; 新生成一个错误, 带堆栈信息<br>func New(message string) error</li>
</ul>
<p>&#x2F;&#x2F; 只附加新的信息<br>func WithMessage(err error, message string) error</p>
<p>&#x2F;&#x2F; 只附加调用堆栈信息<br>func WithStack(err error) error</p>
<p>&#x2F;&#x2F; 同时附加堆栈和信息<br>func Wrapf(err error, format string, args …interface{}) error</p>
<p>如果需要对源错误类型进行自定义判断可以使用 Cause,可以获得最根本的错误原因<br>&#x2F;&#x2F; 获得最根本的错误原因<br>func Cause(err error) error</p>
<p><code>fmt.Errorf</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res1, err1 := div(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">	fmt.Println(res1, err1)</span><br><span class="line"></span><br><span class="line">	res2, err2 := div(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">	fmt.Println(res2, err2)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//返回一个error</span></span><br><span class="line">	e := fmt.Errorf(<span class="string">&quot;自定义error&quot;</span>)</span><br><span class="line">	fmt.Println(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">div</span><span class="params">(n, m <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> m == <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, errors.New(<span class="string">&quot;0不能作为分母&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> m / n, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><font color="#7030a0">一般在没有recover的情况下panic会导致程序崩溃，panic，defer和recover经常同时出现，用于异常处理。</font></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//注册捕获panic的函数,必须先注册，若在panic之后则无效</span></span><br><span class="line">	<span class="keyword">defer</span> doPanic()</span><br><span class="line">	n := <span class="number">0</span></span><br><span class="line">	res := <span class="number">1</span> / n</span><br><span class="line">	fmt.Println(res) <span class="comment">//panic 之后的代码不会执行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当捕获到panic时触发此函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doPanic</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := <span class="built_in">recover</span>()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;捕获到panic&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Goroutine"><a href="#Goroutine" class="headerlink" title="Goroutine"></a>Goroutine</h2><p>进程，线程，协程：<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/7147756611929374756">https://juejin.cn/post/7147756611929374756</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/94018082">https://zhuanlan.zhihu.com/p/94018082</a><br><span style="background:#fdbfff">A. 进程是程序在操作系统中的一次执行过程，系统进行资源分配和调度的一个独立单位。</span><br><span style="background:#fdbfff">B. 线程是进程的一个执行实体,是CPU调度和分派的基本单位,它是比进程更小的能独立运行的基本单位。</span><br><span style="background:#fdbfff">C.一个进程可以创建和撤销多个线程;同一个进程中的多个线程之间可以并发执行。</span><br><span style="background:#fdbfff">协程：独立的栈空间，共享堆空间，调度由用户自己控制，本质上有点类似于用户级线程，这些用户级线程的调度也是自己实现的。</span><br><span style="background:#fdbfff">线程：一个线程上可以跑多个协程，协程是轻量级的线程。</span></p>
<p>在java&#x2F;c++中我们要实现并发编程的时候，我们通常需要自己维护一个线程池，并且需要自己去包装一个又一个的任务，同时需要自己去调度线程执行任务并维护上下文切换，这一切通常会耗费程序员大量的心智。那么能不能有一种机制，程序员只需要定义很多个任务，让系统去帮助我们把这些任务分配到CPU上实现并发执行呢？</p>
<p>Go语言中的goroutine就是这样一种机制，goroutine的概念类似于线程，但 goroutine是由Go的运行时（runtime）调度和管理的。Go程序会智能地将 goroutine 中的任务合理地分配给每个CPU。Go语言之所以被称为现代化的编程语言，就是因为它在语言层面已经内置了调度和上下文切换的机制。</p>
<p>Go语言中使用goroutine非常简单，只需要在调用函数的时候在前面加上go关键字，就可以为一个函数创建一个goroutine。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 当main()函数返回的时候该goroutine就结束了，所有在main()函数中启动的goroutine会一同结束</span></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="comment">//WaitGroup提供了三个很有用的函数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Add</span></span><br><span class="line"><span class="comment">Done</span></span><br><span class="line"><span class="comment">Wait</span></span><br><span class="line"><span class="comment">Add的数量和Done的数量必须相等</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(n <span class="type">int</span>)</span></span>  &#123;</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line">	fmt.Println(n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	wg.Add(<span class="number">5</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i&lt;<span class="number">5</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> f(i)</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>go轻松开启100万个协程</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wx sync.WaitGroup</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++ &#123;</span><br><span class="line">        wx.Add(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">            <span class="keyword">defer</span> wx.Done()</span><br><span class="line">            <span class="keyword">for</span> &#123;</span><br><span class="line">                fmt.Println(i)</span><br><span class="line">                time.Sleep(time.Second*<span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;(i)</span><br><span class="line">    &#125;</span><br><span class="line">    wx.Wait()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，主协程退出了，其他任务也会退出</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 合起来写</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        i := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> &#123;</span><br><span class="line">            i++</span><br><span class="line">            fmt.Printf(<span class="string">&quot;new goroutine: i = %d\n&quot;</span>, i)</span><br><span class="line">            time.Sleep(time.Second)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        i++</span><br><span class="line">        fmt.Printf(<span class="string">&quot;main goroutine: i = %d\n&quot;</span>, i)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">main goroutine: i = 1</span></span><br><span class="line"><span class="comment">new goroutine: i = 1</span></span><br><span class="line"><span class="comment">new goroutine: i = 2</span></span><br><span class="line"><span class="comment">main goroutine: i = 2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">解决这个问题，使用runtime包</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">runtime.Goexit()</span></span><br><span class="line"><span class="comment">调用此函数会立即使当前的goroutine的运行终止（终止协程），而其它的goroutine并不会受此影响。</span></span><br><span class="line"><span class="comment">runtime.Goexit在终止当前goroutine前会先执行此goroutine的还未执行的defer语句。请注意千万别在主函数调用runtime.Goexit，因为会引发panic。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">runtime.GOMAXPROCS()</span></span><br><span class="line"><span class="comment">用来设置可以并行计算的CPU核数最大值，并返回之前的值。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;runtime&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  <span class="comment">//让子协程先执行</span></span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">            fmt.Println(<span class="string">&quot;go&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++ &#123;</span><br><span class="line">        <span class="comment">//让出时间片，先让别的协议执行，它执行完，再回来执行此协程</span></span><br><span class="line">        runtime.Gosched()</span><br><span class="line">        fmt.Println(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;runtime&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">defer</span> fmt.Println(<span class="string">&quot;A.defer&quot;</span>)</span><br><span class="line">        <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">defer</span> fmt.Println(<span class="string">&quot;B.defer&quot;</span>)</span><br><span class="line">            <span class="comment">// 结束协程</span></span><br><span class="line">            runtime.Goexit()</span><br><span class="line">            <span class="keyword">defer</span> fmt.Println(<span class="string">&quot;C.defer&quot;</span>)</span><br><span class="line">            fmt.Println(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">        &#125;()</span><br><span class="line">        fmt.Println(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：<br>单从线程调度讲，Go语言相比起其他语言的优势在于OS线程是由OS内核来调度的，goroutine则是由Go运行时（runtime）自己的调度器调度的，这个调度器使用一个称为m:n调度的技术（复用&#x2F;调度m个goroutine到n个OS线程）。 其一大特点是goroutine的调度是在用户态下完成的， 不涉及内核态与用户态之间的频繁切换，包括内存的分配与释放，都是在用户态维护着一块大的内存池， 不直接调用系统的malloc函数（除非内存池需要改变），成本比调度OS线程低很多。 另一方面充分利用了多核的硬件资源，近似的把若干goroutine均分在物理线程上， 再加上本身goroutine的超轻量，以上种种保证了go调度方面的性能。</p>
<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h3><p>虽然可以使用共享内存进行数据交换，但是共享内存在不同的goroutine中容易发生竞态问题。为了保证数据交换的正确性，必须使用互斥量对内存进行加锁，这种做法势必造成性能问题。</p>
<p>Go 语言中的通道（channel）是一种特殊的类型。通道像一个传送带或者队列，总是遵循先入先出（First In First Out）的规则，保证收发数据的顺序。每一个通道都是一个具体类型的导管，也就是声明channel的时候需要为其指定元素类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量 <span class="keyword">chan</span> 元素类型</span><br><span class="line">声明</span><br><span class="line"><span class="keyword">var</span> msg <span class="keyword">chan</span> <span class="type">int</span></span><br><span class="line">初始化</span><br><span class="line">msg = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>) <span class="comment">// 不带缓冲区，无缓冲的通道只有在有人接收值的时候才能发送值</span></span><br><span class="line">msg = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">16</span>) <span class="comment">// 带缓冲区</span></span><br><span class="line">将一个值发送到通道中</span><br><span class="line">ch &lt;- <span class="number">10</span> <span class="comment">// 把10发送到ch中</span></span><br><span class="line">从一个通道中接收值</span><br><span class="line">x := &lt;- ch <span class="comment">// 从ch中接收值并赋值给变量x</span></span><br><span class="line">&lt;-ch       <span class="comment">// 从ch中接收值，忽略结果</span></span><br><span class="line"><span class="built_in">close</span>函数来关闭通道</span><br><span class="line"><span class="built_in">close</span>(ch)</span><br><span class="line">v, ok := &lt;-ch <span class="comment">// 它可以用来检查Channel是否已经被关闭了</span></span><br><span class="line">单向通道</span><br><span class="line"><span class="number">1.</span><span class="keyword">chan</span>&lt;- <span class="type">int</span>是一个只能发送的通道，可以发送但是不能接收；</span><br><span class="line"><span class="number">2.</span>&lt;-<span class="keyword">chan</span> <span class="type">int</span>是一个只能接收的通道，可以接收但是不能发送。</span><br><span class="line"></span><br><span class="line">关于关闭通道需要注意的事情是，只有在通知接收方goroutine所有的数据都发送完毕的时候才需要关闭通道。通道是可以被垃圾回收机制回收的，它和关闭文件是不一样的，在结束操作之后关闭文件是必须要做的，但关闭通道不是必须的。</span><br><span class="line"></span><br><span class="line">关闭后的通道有以下特点：</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>对一个关闭的通道再发送值就会导致<span class="built_in">panic</span>。</span><br><span class="line"><span class="number">2.</span>对一个关闭的通道进行接收会一直获取值直到通道为空。</span><br><span class="line"><span class="number">3.</span>对一个关闭的并且没有值的通道执行接收操作会得到对应类型的零值。</span><br><span class="line"><span class="number">4.</span>关闭一个已经关闭的通道会导致<span class="built_in">panic</span>。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recv</span><span class="params">(c <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    ret := &lt;-c</span><br><span class="line">    fmt.Println(<span class="string">&quot;接收成功&quot;</span>, ret)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">    <span class="keyword">go</span> recv(ch) <span class="comment">// 启用goroutine从通道接收值</span></span><br><span class="line">    ch &lt;- <span class="number">10</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;发送成功&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p><code>select</code>语句选择一组可能的send操作和receive操作去处理。它类似<code>switch</code>,但是只是用来处理通讯(communication)操作。</p>
<p>如果有同时多个case去处理,比如同时有多个channel可以接收数据，那么Go会伪随机的选择一个case处理(pseudo-random)。如果没有case需要处理，则会选择<code>default</code>去处理，如果<code>default case</code>存在的情况下。如果没有<code>default case</code>，则<code>select</code>语句会阻塞，直到某个case需要处理。</p>
<p>需要注意的是，nil channel上的操作会一直被阻塞，如果没有default case,只有nil channel的select会一直被阻塞。</p>
<h3 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a>timeout</h3><p><code>select</code>有很重要的一个应用就是超时处理。 因为上面我们提到，如果没有case需要处理，select语句就会一直阻塞着。这时候我们可能就需要一个超时操作，用来处理超时的情况。</p>
<p>下面这个例子我们会在2秒后往channel c1中发送一个数据，但是<code>select</code>设置为1秒超时,因此我们会打印出<code>timeout 1</code>,而不是<code>result 1</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;time&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    c1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        time.Sleep(time.Second * <span class="number">2</span>)</span><br><span class="line">        c1 &lt;- <span class="string">&quot;result 1&quot;</span></span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> res := &lt;-c1:</span><br><span class="line">        fmt.Println(res)</span><br><span class="line">    <span class="keyword">case</span> &lt;-time.After(time.Second * <span class="number">1</span>):</span><br><span class="line">        fmt.Println(<span class="string">&quot;timeout 1&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实它利用的是<code>time.After</code>方法，它返回一个类型为<code>&lt;-chan Time</code>的单向的channel，在指定的时间发送一个当前时间给返回的channel中。</p>
<h3 id="Timer和Ticker"><a href="#Timer和Ticker" class="headerlink" title="Timer和Ticker"></a>Timer和Ticker</h3><p>timer是一个定时器，代表未来的一个单一事件，你可以告诉timer你要等待多长时间，它提供一个Channel，在将来的那个时间那个Channel提供了一个时间值。下面的例子中第二行会阻塞2秒钟左右的时间，直到时间到了才会继续执行。</p>
<p>当然如果你只是想单纯的等待的话，可以使用<code>time.Sleep</code>来实现。</p>
<p>你还可以使用<code>timer.Stop</code>来停止计时器。</p>
<p><code>ticker</code>是一个定时触发的计时器，它会以一个间隔(interval)往Channel发送一个事件(当前时间)，而Channel的接收者可以以固定的时间间隔从Channel中读取事件。下面的例子中ticker每500毫秒触发一次，你可以观察输出的时间。</p>
<p>类似timer, ticker也可以通过<code>Stop</code>方法来停止。一旦它停止，接收者不再会从channel中接收数据了。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://www.idesperado.com">Jane</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.idesperado.com/post/80db8027.html">http://www.idesperado.com/post/80db8027.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.idesperado.com" target="_blank">desperado</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/go%E8%AF%AD%E8%A8%80/">go语言</a></div><div class="post_share"><div class="social-share" data-image="/extra_imgs/town.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/post/897196e0.html" title="日常使用的工具"><img class="cover" src="/extra_imgs/town.jpg" onerror="onerror=null;src='/img/unfind.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">日常使用的工具</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img2.baidu.com/it/u=4274118481,3879373441&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=400&amp;h=400" onerror="this.onerror=null;this.src='/img/unfind.jpg'" alt="avatar"/></div><div class="author-info__name">Jane</div><div class="author-info__description">We think too much and feel too little. More than machinery we need humanity!</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">94</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Zhang-Jane"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Zhang-Jane" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:luckingshine@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bool%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">bool类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">数值型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E5%9E%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">整数型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">浮点型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.4.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">1.5.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#code"><span class="toc-number">2.</span> <span class="toc-text">code</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">高级类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">3.1.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E7%89%87"><span class="toc-number">3.2.</span> <span class="toc-text">切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-number">3.3.</span> <span class="toc-text">map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#make%E5%92%8Cnew"><span class="toc-number">3.4.</span> <span class="toc-text">make和new</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3-%E6%8E%A5%E5%8F%A3%E5%91%BD%E5%90%8D%E4%B9%A0%E6%83%AF%E4%BB%A5-er-%E7%BB%93%E5%B0%BE"><span class="toc-number">3.5.</span> <span class="toc-text">接口( 接口命名习惯以 er 结尾)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93-%E9%A6%96%E5%AD%97%E6%AF%8D%E5%A4%A7%E5%86%99%E5%85%AC%E5%85%B1%EF%BC%8C%E5%B0%8F%E5%86%99%E7%A7%81%E6%9C%89"><span class="toc-number">3.6.</span> <span class="toc-text">结构体(首字母大写公共，小写私有)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%A0%87%E7%AD%BE"><span class="toc-number">3.6.1.</span> <span class="toc-text">结构体标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93-%E6%96%B9%E6%B3%95"><span class="toc-number">3.6.2.</span> <span class="toc-text">结构体-方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84type"><span class="toc-number">3.7.</span> <span class="toc-text">go语言中的type</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">4.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">6.</span> <span class="toc-text">指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer-panic-error-recover"><span class="toc-number">7.</span> <span class="toc-text">defer,panic,error,recover</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#defer%E7%89%B9%E6%80%A7"><span class="toc-number">7.1.</span> <span class="toc-text">defer特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#panic-%E5%92%8C-error"><span class="toc-number">7.2.</span> <span class="toc-text">panic 和 error</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Goroutine"><span class="toc-number">8.</span> <span class="toc-text">Goroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Channel"><span class="toc-number">8.1.</span> <span class="toc-text">Channel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select"><span class="toc-number">8.2.</span> <span class="toc-text">select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeout"><span class="toc-number">8.3.</span> <span class="toc-text">timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Timer%E5%92%8CTicker"><span class="toc-number">8.4.</span> <span class="toc-text">Timer和Ticker</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/80db8027.html" title="go语言基础">go语言基础</a><time datetime="2023-02-05T07:50:08.000Z" title="发表于 2023-02-05 15:50:08">2023-02-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/897196e0.html" title="日常使用的工具">日常使用的工具</a><time datetime="2023-02-05T07:39:33.000Z" title="发表于 2023-02-05 15:39:33">2023-02-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/b3a6abb4.html" title="线程和进程">线程和进程</a><time datetime="2023-01-26T13:57:12.000Z" title="发表于 2023-01-26 21:57:12">2023-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/bbdeeae3.html" title="IDA手册">IDA手册</a><time datetime="2023-01-24T14:51:47.000Z" title="发表于 2023-01-24 22:51:47">2023-01-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/3ad834c9.html" title="zookeeper">zookeeper</a><time datetime="2022-12-25T15:25:46.000Z" title="发表于 2022-12-25 23:25:46">2022-12-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/extra_imgs/town.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Jane</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="43049" data-server="netease" data-type="album" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>